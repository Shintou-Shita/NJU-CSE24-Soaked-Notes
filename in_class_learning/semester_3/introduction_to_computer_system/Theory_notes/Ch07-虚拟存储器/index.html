
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../Ch06-%E5%AD%98%E5%82%A8%E5%99%A8%E5%B1%82%E6%AC%A1%E7%BB%93%E6%9E%84/">
      
      
        <link rel="next" href="../Ch08-%E8%BF%9B%E7%A8%8B%E4%B8%8E%E5%BC%82%E5%B8%B8%E6%8E%A7%E5%88%B6%E6%B5%81/">
      
      
        
      
      
      <link rel="icon" href="../../../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.0">
    
    
      
        <title>Ch07 虚拟存储器 - My Docs</title>
      
    
    
      <link rel="stylesheet" href="../../../../../assets/stylesheets/main.618322db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../../../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#ch07" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../../../.." title="My Docs" class="md-header__button md-logo" aria-label="My Docs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            My Docs
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Ch07 虚拟存储器
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../../../.." title="My Docs" class="md-nav__button md-logo" aria-label="My Docs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    My Docs
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Home
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    In class learning
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    In class learning
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1" checked>
        
          
          <label class="md-nav__link" for="__nav_2_1" id="__nav_2_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Semester 3
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_1_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    Semester 3
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1_1" >
        
          
          <label class="md-nav__link" for="__nav_2_1_1" id="__nav_2_1_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Discrete mathematics
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_1_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_1_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    Discrete mathematics
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../discrete_mathematics/L01-03-%E5%BD%A2%E5%BC%8F%E9%80%BB%E8%BE%91%E4%B8%8E%E8%AF%81%E6%98%8E/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    L01 03 形式逻辑与证明
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../discrete_mathematics/L04-06-%E9%9B%86%E5%90%88%E4%B8%8E%E5%85%B3%E7%B3%BB/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    L04 06 集合与关系
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../discrete_mathematics/L07-10-%E5%9F%BA%E6%9C%AC%E7%90%86%E8%AE%BA%E5%B7%A5%E5%85%B7-%E6%95%B0%E8%AE%BA-%E5%BD%92%E7%BA%B3%E6%B3%95-%E8%AE%A1%E6%95%B0-%E6%A6%82%E7%8E%87/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    L07 10 基本理论工具 数论 归纳法 计数 概率
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../discrete_mathematics/L11-17-%E5%9F%BA%E6%9C%AC%E6%8A%BD%E8%B1%A1%E4%BB%A3%E6%95%B0-%E5%85%B3%E7%B3%BB-%E7%BE%A4%E8%AE%BA-%E6%A0%BC/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    L11 17 基本抽象代数 关系 群论 格
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../discrete_mathematics/L18-22-%E5%9B%BE%E8%AE%BA/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    L18 22 图论
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../discrete_mathematics/L23-25-%E6%A0%91%E8%AE%BA/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    L23 25 树论
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2_1_2" id="__nav_2_1_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Introduction to computer system
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_1_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2_1_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Introduction to computer system
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1_2_1" >
        
          
          <label class="md-nav__link" for="__nav_2_1_2_1" id="__nav_2_1_2_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Lab notes
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_1_2_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_1_2_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    Lab notes
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Lab-notes/Lab_log/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Lab log
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1_2_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2_1_2_2" id="__nav_2_1_2_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Theory notes
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_1_2_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2_1_2_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Theory notes
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../AAA-Index/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    AAA Index
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Ch01-%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F%E6%A6%82%E8%BF%B0/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Ch01 计算机系统概述
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Ch02-%E6%95%B0%E6%8D%AE%E7%9A%84%E6%9C%BA%E5%99%A8%E7%BA%A7%E8%A1%A8%E7%A4%BA%E4%B8%8E%E5%A4%84%E7%90%86/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Ch02 数据的机器级表示与处理
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Ch03-%E7%A8%8B%E5%BA%8F%E8%BD%AC%E6%8D%A2%E4%B8%8E%E6%8C%87%E4%BB%A4%E7%B3%BB%E7%BB%9F/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Ch03 程序转换与指令系统
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Ch04-%E7%A8%8B%E5%BA%8F%E7%9A%84%E6%9C%BA%E5%99%A8%E7%BA%A7%E8%A1%A8%E7%A4%BA/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Ch04 程序的机器级表示
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Ch05-%E7%A8%8B%E5%BA%8F%E7%9A%84%E9%93%BE%E6%8E%A5%E4%B8%8E%E5%8A%A0%E8%BD%BD%E6%89%A7%E8%A1%8C/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Ch05 程序的链接与加载执行
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Ch06-%E5%AD%98%E5%82%A8%E5%99%A8%E5%B1%82%E6%AC%A1%E7%BB%93%E6%9E%84/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    存储器层次结构
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    Ch07 虚拟存储器
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    Ch07 虚拟存储器
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        虚拟存储器概述
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="虚拟存储器概述">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      
        虚拟存储器的基本概念
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      
        进程的虚拟地址空间
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="进程的虚拟地址空间">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#linux" class="md-nav__link">
    <span class="md-ellipsis">
      
        Linux 中进程的虚拟地址空间
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#linux_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Linux 虚拟地址空间中的区域
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      
        虚拟存储器的基本类型
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="虚拟存储器的基本类型">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    <span class="md-ellipsis">
      
        段式虚拟存储器
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    <span class="md-ellipsis">
      
        页式虚拟存储器
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    <span class="md-ellipsis">
      
        段页式虚拟存储器
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    <span class="md-ellipsis">
      
        页式虚拟存储器的实现
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="页式虚拟存储器的实现">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    <span class="md-ellipsis">
      
        页表和页表项的结构
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    <span class="md-ellipsis">
      
        页式存储管理总体结构
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    <span class="md-ellipsis">
      
        页式虚拟存储地址转换
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_12" class="md-nav__link">
    <span class="md-ellipsis">
      
        快表
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="快表">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#tlb" class="md-nav__link">
    <span class="md-ellipsis">
      
        TLB 基本组织结构
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tlb_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        TLB 的缺失处理
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tlb-tlb" class="md-nav__link">
    <span class="md-ellipsis">
      
        联合/分离 TLB 和多级 TLB
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tlb_2" class="md-nav__link">
    <span class="md-ellipsis">
      
        TLB 和慢表之间的一致性问题
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tlb_3" class="md-nav__link">
    <span class="md-ellipsis">
      
        TLB 和地址空间切换
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tlb-cache" class="md-nav__link">
    <span class="md-ellipsis">
      
        具有 TLB 和 cache 的存储系统
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="具有 TLB 和 cache 的存储系统">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_13" class="md-nav__link">
    <span class="md-ellipsis">
      
        层次化存储系统结构
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cpu" class="md-nav__link">
    <span class="md-ellipsis">
      
        CPU 访存过程
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cache" class="md-nav__link">
    <span class="md-ellipsis">
      
        cache 的四种查找方式
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_14" class="md-nav__link">
    <span class="md-ellipsis">
      
        存储保护机制
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="存储保护机制">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_15" class="md-nav__link">
    <span class="md-ellipsis">
      
        访问权限保护
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_16" class="md-nav__link">
    <span class="md-ellipsis">
      
        存储区域保护
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ia-32-linux" class="md-nav__link">
    <span class="md-ellipsis">
      
        IA-32 + Linux 中的地址转换*
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="IA-32 + Linux 中的地址转换*">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_17" class="md-nav__link">
    <span class="md-ellipsis">
      
        逻辑地址到线性地址的转换
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="逻辑地址到线性地址的转换">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_18" class="md-nav__link">
    <span class="md-ellipsis">
      
        段描述符
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_19" class="md-nav__link">
    <span class="md-ellipsis">
      
        段描述符表
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_20" class="md-nav__link">
    <span class="md-ellipsis">
      
        段选择符和段寄存器
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_21" class="md-nav__link">
    <span class="md-ellipsis">
      
        用户不可见寄存器
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_22" class="md-nav__link">
    <span class="md-ellipsis">
      
        逻辑地址向线性地址的转换
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_23" class="md-nav__link">
    <span class="md-ellipsis">
      
        线性地址到物理地址的转换
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="线性地址到物理地址的转换">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_24" class="md-nav__link">
    <span class="md-ellipsis">
      
        控制寄存器
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_25" class="md-nav__link">
    <span class="md-ellipsis">
      
        线性地址向物理地址转换
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#intel-core-i7-linux" class="md-nav__link">
    <span class="md-ellipsis">
      
        实例：Intel Core i7 + Linux 存储系统*
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_26" class="md-nav__link">
    <span class="md-ellipsis">
      
        堆区动态分配*
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_27" class="md-nav__link">
    <span class="md-ellipsis">
      
        章节小结
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Ch08-%E8%BF%9B%E7%A8%8B%E4%B8%8E%E5%BC%82%E5%B8%B8%E6%8E%A7%E5%88%B6%E6%B5%81/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    L08 进程与异常控制流
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Ch09-IO%E6%93%8D%E4%BD%9C%E7%9A%84%E5%AE%9E%E7%8E%B0/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Ch09 I/O 操作的实现
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Ch10-Optional-%E7%A8%8B%E5%BA%8F%E6%80%A7%E8%83%BD%E7%9A%84%E4%BC%98%E5%8C%96/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Ch10 Optional 程序性能的优化
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Ch11-Optional-%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Ch11 Optional 网络编程
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Ch12-Optional-%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Ch12 Optional 并发编程
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1_3" >
        
          
          <label class="md-nav__link" for="__nav_2_1_3" id="__nav_2_1_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Network attack and defense
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_1_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_1_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Network attack and defense
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../network_attack_and_defense/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Index
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../network_attack_and_defense/lab1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Lab1
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../network_attack_and_defense/lab2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Lab2
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../network_attack_and_defense/lab3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Lab3
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../network_attack_and_defense/lab4/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Lab4
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../network_attack_and_defense/lab5/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Lab5
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../network_attack_and_defense/lab6/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Lab6
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../network_attack_and_defense/lab7_pwn/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    NAD lab07 PWN
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../network_attack_and_defense/lab8/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Lab8
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../network_attack_and_defense/lab9/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Lab9
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1_4" >
        
          
          <label class="md-nav__link" for="__nav_2_1_4" id="__nav_2_1_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Probability theory
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_1_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_1_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Probability theory
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../probability_theory/AAA_Reference/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    AAA Reference
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../probability_theory/Ch-0-%E5%B8%B8%E8%A7%81%E5%88%86%E5%B8%83%E9%80%9F%E6%9F%A5/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Ch 0 常见分布速查
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../probability_theory/Ch-1-%E9%9A%8F%E6%9C%BA%E4%BA%8B%E4%BB%B6%E4%B8%8E%E6%A6%82%E7%8E%87/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Ch.1 随机事件与概率
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../probability_theory/Ch-2-%E9%9A%8F%E6%9C%BA%E5%8F%98%E9%87%8F%E5%8F%8A%E5%85%B6%E6%A6%82%E7%8E%87%E5%88%86%E5%B8%83/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Ch.2 随机变量及其概率分布
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../probability_theory/Ch-3-%E4%BA%8C%E7%BB%B4%E9%9A%8F%E6%9C%BA%E5%8F%98%E9%87%8F%E5%8F%8A%E5%85%B6%E5%88%86%E5%B8%83/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Ch.3 二维随机变量及其分布
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../probability_theory/Ch-4-%E9%9A%8F%E6%9C%BA%E5%8F%98%E9%87%8F%E7%9A%84%E6%95%B0%E5%AD%97%E7%89%B9%E5%BE%81/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Ch.4 随机变量的数字特征
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../probability_theory/Ch-5-%E6%9E%81%E9%99%90%E7%90%86%E8%AE%BA/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Ch.5 极限理论
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../probability_theory/Ch-6-%E7%BB%9F%E8%AE%A1%E9%87%8F%E4%B8%8E%E6%8A%BD%E6%A0%B7%E5%88%86%E5%B8%83/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Ch.6 统计量与抽样分布
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../probability_theory/Ch-7-%E5%8F%82%E6%95%B0%E4%BC%B0%E8%AE%A1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Ch.7 参数估计
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../probability_theory/Ch-8-%E5%81%87%E8%AE%BE%E6%A3%80%E9%AA%8C/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Ch.8 假设检验
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1_5" >
        
          
          <label class="md-nav__link" for="__nav_2_1_5" id="__nav_2_1_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    problem solving III
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_1_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_1_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    problem solving III
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1_5_1" >
        
          
          <label class="md-nav__link" for="__nav_2_1_5_1" id="__nav_2_1_5_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    OnlineJudges
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_1_5_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_1_5_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    OnlineJudges
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../problem_solving_III/OnlineJudges/AAA_README/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    AAA README
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../problem_solving_III/OnlineJudges/P10001/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    P10001
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../problem_solving_III/OnlineJudges/P10002/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    P10002
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../problem_solving_III/OnlineJudges/P10003/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    P10003
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../problem_solving_III/OnlineJudges/P10004/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    P10004
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../problem_solving_III/OnlineJudges/P10005/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    P10005
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../problem_solving_III/OnlineJudges/P10006/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    P10006
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../problem_solving_III/OnlineJudges/P10007/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    P10007
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1_5_2" >
        
          
          <label class="md-nav__link" for="__nav_2_1_5_2" id="__nav_2_1_5_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    OnlineJudges Solutions
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_1_5_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_1_5_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    OnlineJudges Solutions
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../problem_solving_III/OnlineJudges-Solutions/AAA_README/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    AAA README
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../problem_solving_III/OnlineJudges-Solutions/P1001/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    P1001
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../problem_solving_III/OnlineJudges-Solutions/P1002/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    P1002
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../problem_solving_III/OnlineJudges-Solutions/P1003/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    P1003
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../problem_solving_III/OnlineJudges-Solutions/P1004/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    P1004
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../problem_solving_III/OnlineJudges-Solutions/P1005/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    P1005
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../problem_solving_III/OnlineJudges-Solutions/P1006/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    P1006
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../problem_solving_III/OnlineJudges-Solutions/P1007/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    P1007
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../problem_solving_III/OnlineJudges-Solutions/P1008/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    P1008
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../problem_solving_III/OnlineJudges-Solutions/P1009/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    P1009
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../problem_solving_III/OnlineJudges-Solutions/P1010/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    P1010
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../problem_solving_III/OnlineJudges-Solutions/P1011/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    P1011
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../problem_solving_III/OnlineJudges-Solutions/P1012/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    P1012
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../problem_solving_III/OnlineJudges-Solutions/P1013/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    P1013
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../problem_solving_III/OnlineJudges-Solutions/P1014/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    P1014
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../problem_solving_III/OnlineJudges-Solutions/P1015/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    P1015
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../problem_solving_III/OnlineJudges-Solutions/P1016/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    P1016
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../problem_solving_III/OnlineJudges-Solutions/P1017/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    P1017
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../problem_solving_III/OnlineJudges-Solutions/P1018/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    P1018
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../problem_solving_III/OnlineJudges-Solutions/P1019/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    P1019
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../problem_solving_III/OnlineJudges-Solutions/P1020/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    P1020
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../problem_solving_III/OnlineJudges-Solutions/P1021/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    P1021
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../problem_solving_III/OnlineJudges-Solutions/P1022/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    P1022
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../problem_solving_III/OnlineJudges-Solutions/P1023/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    P1023
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../problem_solving_III/OnlineJudges-Solutions/P1024/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    P1024
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../problem_solving_III/OnlineJudges-Solutions/P1025/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    P1025
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../problem_solving_III/OnlineJudges-Solutions/P1026/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    P1026
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1_5_3" >
        
          
          <label class="md-nav__link" for="__nav_2_1_5_3" id="__nav_2_1_5_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Theory
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_1_5_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_1_5_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Theory
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../problem_solving_III/Theory/A001_%E8%AE%B0%E5%8F%B7/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    A001 记号
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../problem_solving_III/Theory/L001_%E5%9B%BE%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    L001 图的基本概念
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../problem_solving_III/Theory/L002_%E8%BF%9E%E9%80%9A%E5%92%8C%E9%81%8D%E5%8E%86/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    L002 连通和遍历
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../problem_solving_III/Theory/L003_%E5%9C%88%E5%92%8C%E9%81%8D%E5%8E%86/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    L003 圈和遍历
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../problem_solving_III/Theory/L004_%E8%BF%9E%E9%80%9A%E5%BA%A6/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    L004 连通度
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../problem_solving_III/Theory/L005_%E5%8C%B9%E9%85%8D/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    L005 匹配
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../problem_solving_III/Theory/L006_%E5%8D%95%E6%BA%90%E6%9C%80%E7%9F%AD%E8%B7%AF/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    L006 单源最短路
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../problem_solving_III/Theory/L007_%E5%A4%9A%E6%BA%90%E6%9C%80%E7%9F%AD%E8%B7%AF/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    L007 多源最短路
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../problem_solving_III/Theory/L008_%E6%9C%80%E5%B0%8F%E7%94%9F%E6%88%90%E6%A0%91%E5%92%8C%E8%B5%8B%E6%9D%83%E6%AC%A7%E6%8B%89%E5%9B%BE/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    L008 最小生成树和赋权欧拉图
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../problem_solving_III/Theory/L009_%E6%9C%89%E5%90%91%E5%9B%BE/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    L009 有向图
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../problem_solving_III/Theory/L010_%E6%B5%81%E7%BD%91%E7%BB%9C%E5%92%8C%E6%9C%80%E5%A4%A7%E6%B5%81/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    L010 流网络和最大流
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../problem_solving_III/Theory/L011_%E7%8B%AC%E7%AB%8B%E3%80%81%E8%A6%86%E7%9B%96%E5%92%8C%E6%94%AF%E9%85%8D/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    L011 独立、覆盖和支配
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../problem_solving_III/Theory/L012_%E6%9F%93%E8%89%B2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    L012 染色
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../problem_solving_III/Theory/L013_%E5%B9%B3%E9%9D%A2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    L013 平面
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../problem_solving_III/Theory/L014_%E7%BE%A4%E5%92%8C%E5%BE%AA%E7%8E%AF%E7%BE%A4/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    L014 群和循环群
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../problem_solving_III/Theory/L015_%E7%BD%AE%E6%8D%A2%E7%BE%A4%E3%80%81%E9%99%AA%E9%9B%86%E5%92%8C%E6%8B%89%E6%A0%BC%E6%9C%97%E6%97%A5%E5%AE%9A%E7%90%86/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    L015 置换群、陪集和拉格朗日定理
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../problem_solving_III/Theory/L016_%E4%BB%A3%E6%95%B0%E7%BC%96%E7%A0%81/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    L16 代数编码
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../problem_solving_III/Theory/L017_%E6%8A%BD%E8%B1%A1%E4%BB%A3%E6%95%B0%E4%B8%AD%E7%9A%84%E5%85%B6%E4%BB%96%E9%97%AE%E9%A2%98/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    L017 抽象代数中的其他问题
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Out class learning
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Out class learning
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1" >
        
          
          <label class="md-nav__link" for="__nav_3_1" id="__nav_3_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Freely learning
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    Freely learning
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1_1" >
        
          
          <label class="md-nav__link" for="__nav_3_1_1" id="__nav_3_1_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    CSAPP
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_1_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_1_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    CSAPP
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../out_class_learning/freely_learning/CSAPP/CSAPPreadme/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    CSAPPreadme
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../out_class_learning/freely_learning/CSAPP/L05-Machine-Level-Programming-I-Basics/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    L05 Machine-Level Programming I: Basics
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../out_class_learning/freely_learning/CSAPP/L06-Machine-Level-Programming-II-Control/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    L06 Machine-Level Programming II: Control
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../out_class_learning/freely_learning/CSAPP/L07-Machine-Level-Programming-III-Procedures/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    L07 Machine-Level Programming III: Procedures
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../out_class_learning/freely_learning/CSAPP/L08-Machine-Level-Programming-IV-Data/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    L08 Machine-Level Programming IV: Data
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../out_class_learning/freely_learning/CSAPP/L09-Machine-Level-Programming-V-Advanced-Topics/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    L09 Machine-Level Programming V: Advanced Topics
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../out_class_learning/freely_learning/CSAPP/L10-Program-Optimization/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    L10 Program Optimization
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../out_class_learning/freely_learning/CSAPP/L11-The-Memory-Hierarchy/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    L11 The Memory Hierarchy
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../out_class_learning/freely_learning/CSAPP/L12-Cache-Memories/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    L12 Cache Memories
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../out_class_learning/freely_learning/CSAPP/L13-Linking/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    L13 Linking
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../out_class_learning/freely_learning/CSAPP/L14-Exceptional-Control-Flow-Exceptions-and-Processes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    L14 Exceptional Control Flow: Exceptions and Processes
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../out_class_learning/freely_learning/CSAPP/L15-Exceptional-Control-Flow-Signals-and-Nonlocal-Jumps/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    L15 Exceptional Control Flow: Signals and Nonlocal Jumps
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../out_class_learning/freely_learning/CSAPP/L16-System-Level-IO/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    L16 System-Level I/O
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../out_class_learning/freely_learning/CSAPP/L17-Virtual-Memory-Concepts/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    L17 Virtual Memory: Concepts
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2" >
        
          
          <label class="md-nav__link" for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Quickly learning
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Quickly learning
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../out_class_learning/quickly_learning/C%2B%2BOOP%20%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    C++OOP 快速入门
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../out_class_learning/quickly_learning/MkDocs%20%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    MkDocs 快速入门
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../out_class_learning/quickly_learning/%E4%B8%89%E5%B0%8F%E6%97%B6%E5%89%8D%E7%AB%AF%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    三小时前端快速入门
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        虚拟存储器概述
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="虚拟存储器概述">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      
        虚拟存储器的基本概念
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      
        进程的虚拟地址空间
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="进程的虚拟地址空间">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#linux" class="md-nav__link">
    <span class="md-ellipsis">
      
        Linux 中进程的虚拟地址空间
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#linux_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Linux 虚拟地址空间中的区域
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      
        虚拟存储器的基本类型
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="虚拟存储器的基本类型">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    <span class="md-ellipsis">
      
        段式虚拟存储器
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    <span class="md-ellipsis">
      
        页式虚拟存储器
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    <span class="md-ellipsis">
      
        段页式虚拟存储器
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    <span class="md-ellipsis">
      
        页式虚拟存储器的实现
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="页式虚拟存储器的实现">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    <span class="md-ellipsis">
      
        页表和页表项的结构
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    <span class="md-ellipsis">
      
        页式存储管理总体结构
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    <span class="md-ellipsis">
      
        页式虚拟存储地址转换
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_12" class="md-nav__link">
    <span class="md-ellipsis">
      
        快表
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="快表">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#tlb" class="md-nav__link">
    <span class="md-ellipsis">
      
        TLB 基本组织结构
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tlb_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        TLB 的缺失处理
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tlb-tlb" class="md-nav__link">
    <span class="md-ellipsis">
      
        联合/分离 TLB 和多级 TLB
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tlb_2" class="md-nav__link">
    <span class="md-ellipsis">
      
        TLB 和慢表之间的一致性问题
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tlb_3" class="md-nav__link">
    <span class="md-ellipsis">
      
        TLB 和地址空间切换
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tlb-cache" class="md-nav__link">
    <span class="md-ellipsis">
      
        具有 TLB 和 cache 的存储系统
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="具有 TLB 和 cache 的存储系统">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_13" class="md-nav__link">
    <span class="md-ellipsis">
      
        层次化存储系统结构
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cpu" class="md-nav__link">
    <span class="md-ellipsis">
      
        CPU 访存过程
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cache" class="md-nav__link">
    <span class="md-ellipsis">
      
        cache 的四种查找方式
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_14" class="md-nav__link">
    <span class="md-ellipsis">
      
        存储保护机制
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="存储保护机制">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_15" class="md-nav__link">
    <span class="md-ellipsis">
      
        访问权限保护
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_16" class="md-nav__link">
    <span class="md-ellipsis">
      
        存储区域保护
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ia-32-linux" class="md-nav__link">
    <span class="md-ellipsis">
      
        IA-32 + Linux 中的地址转换*
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="IA-32 + Linux 中的地址转换*">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_17" class="md-nav__link">
    <span class="md-ellipsis">
      
        逻辑地址到线性地址的转换
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="逻辑地址到线性地址的转换">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_18" class="md-nav__link">
    <span class="md-ellipsis">
      
        段描述符
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_19" class="md-nav__link">
    <span class="md-ellipsis">
      
        段描述符表
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_20" class="md-nav__link">
    <span class="md-ellipsis">
      
        段选择符和段寄存器
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_21" class="md-nav__link">
    <span class="md-ellipsis">
      
        用户不可见寄存器
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_22" class="md-nav__link">
    <span class="md-ellipsis">
      
        逻辑地址向线性地址的转换
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_23" class="md-nav__link">
    <span class="md-ellipsis">
      
        线性地址到物理地址的转换
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="线性地址到物理地址的转换">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_24" class="md-nav__link">
    <span class="md-ellipsis">
      
        控制寄存器
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_25" class="md-nav__link">
    <span class="md-ellipsis">
      
        线性地址向物理地址转换
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#intel-core-i7-linux" class="md-nav__link">
    <span class="md-ellipsis">
      
        实例：Intel Core i7 + Linux 存储系统*
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_26" class="md-nav__link">
    <span class="md-ellipsis">
      
        堆区动态分配*
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_27" class="md-nav__link">
    <span class="md-ellipsis">
      
        章节小结
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="ch07">Ch07 虚拟存储器</h1>
<p>由于技术和成本等因素，早期计算机的主存受限，而程序设计时人们不希望受特定计算机物理内存大小制约，如何解决这两者之间的矛盾是一个重要问题。</p>
<p>此外，现代操作系统都支持多任务，如何让多个程序有效而安全地共享主存是一个重要问题。</p>
<p>为了解决上述两个问题，计算机中采用了「虚拟存储技术」，其基本思想是：程序员在一个不受物理内存空间限制且比物理内存空间大得多的虚拟的逻辑地址空间中编写程序，就好像每个程序都独立拥有一个巨大的存储空间一样。程序执行过程中，把当前执行到的一部分程序和相应的数据调入贮存，其他未用到的部分暂时存放在硬盘上。</p>
<h2 id="_1">虚拟存储器概述</h2>
<h3 id="_2">虚拟存储器的基本概念</h3>
<p>在不采用虚拟存储机制的计算机系统中，CPU 执行指令时，取指令和存取操作数所用的地址都是主存物理地址，无须进行地址转换，因而计算机硬件结构比较简单，指令执行速度较快。实时性要求较高的嵌入式为微控制器大多不采用虚拟存储机制。</p>
<p>目前在各类通用计算机系统（服务器、台式计算机、笔记本计算机等）中都采用「虚拟存储器技术」。</p>
<p>在采用虚拟存储技术的计算机中执行指令时，CPU 通过「存储管理单元」（MMU, memory management unit）将指令给出的「逻辑地址」（VA, virtual address）（也称为「虚拟地址」或「虚地址」）转换为主存的「物理地址」（PA, physical address）（也称为「主存地址」或「实地址」）。</p>
<p>在地址转换过程中，MMU 还会检查访问信息是否在主存中、地址是否越界、访问是否越权等情况：若信息不在主存中，则通知操作系统将数据从外存读到主存；若地址越界或访问越权，则通知操作系统进行相应的异常处理。</p>
<p>【这里有一张图，图 7.1】</p>
<p>「虚拟存储器机制」（简称「虚存机制」）由硬件与操作系统共同协作实现，涉及计算机系统的许多层面，包括操作系统中的许多概念，如进程、存储管理、虚拟地址空间、缺页处理等等。</p>
<h3 id="_3">进程的虚拟地址空间</h3>
<p>每个高级语言源程序经编译、汇编、链接等处理生成可执行的二进制及其目标代码时，都会被映射到一个统一的「虚拟地址空间」。所谓「统一」是指不同的可执行文件所映射的虚拟地址空间大小和区域划分结构相同。</p>
<p>「进程」是操作系统对处理器中程序运行过称的一种抽象。简单来说，进程是程序的一次运行过程。因此，一个进程一定可以对应一个用户程序（即樱花用程序），后者以可执行文件的方式存放在外村。可执行文件所映射的虚拟地址空间即为进程的虚拟地址空间映像。</p>
<p>软件约定了统一虚拟地址空间大小和布局，从而简化了程序链接和加载过程。虚存机制给进程带来一个假象，使其认为自己独占内存，并且主存空间极大。</p>
<p>这有三个好处：</p>
<ul>
<li>每个进程的虚拟地址空间一致，从而简化存储管理。</li>
<li>虚存机制把主存看作外部存储器的缓存，在主存中仅保存当前活动的程序段和数据区，并根据需要在外村和主存之间交换信息，通过这种方式有效地利用有限的主存空间。</li>
<li>每个进程的虚拟地址空间是私有的、独立的，因此可以保护各进程的存储空间不被其他进程破坏。</li>
</ul>
<h4 id="linux">Linux 中进程的虚拟地址空间</h4>
<p>【这里有一张图，图 7.2】</p>
<p>上图给出了在 Intel 架构下 Linux 操作系统中的一个进程对应的虚拟地址空间，进程的虚拟地址空间由「内核空间」和「用户空间」组成。</p>
<p>内核空间映射到操作系统内核代码和数据、物理存储区，包括与每个进程相关的系统级上下文数据结构（如进程表示信息、进程现场信息、页表等进程控制信息以及内核栈等），内核空间大小在每个进程的地址空间中都相同，用户程序无权访问。</p>
<p>用户空间映射到用户进程的代码、数据、堆和栈等用户级上下文信息。每个区域都有相应的起始位置，堆区和栈区相向生长，即栈从高地址向低地址生长，堆则相反。</p>
<p>对于 IA32，内核空火箭在 0xC000 0000 以上的高端地址上，用户栈区从起始位置 0xBFFF FFFF 开始向低地址增长，堆栈区中的共享库映射区域从 0x4000 0000 开始向高地址增长，只读代码段从 0x804 8000 开始向高地址增长，只读代码段后是可读写数据段，要求按 4KB 对齐。</p>
<p>对于 x86-64，只读代码区域从 0x40 0000 开始，用户空间的最大地址为 0x7FFF FFFF FFFF，通常，共享库映射在 0x7FFF F000 0000 - 0x7FFF FFFF FFFF 的区域内，从 0x7FFF FFFF FFFF 向下是用户「运行时栈」（runtime stack），一般限定栈大小为 8MB，整个用户空间大小为 <span class="arithmatex">\(2^{47}\pu{Bytes}=128\pu{TB}\)</span>，内核空间在 0x8000 0000 0000 以上的高端地址上，最大地址为 0xFFFF FFFF FFFF，整个内核空间大小也是 <span class="arithmatex">\(2^{47}\pu{Bytes}=128\pu{TB}\)</span>.</p>
<p>目前较新的 Linux 发行版，其 gcc 默认会生成「位置无关可执行文件」（PIE, position independent executable），用 OBJDUMP 查看其反汇编代码，会发现其代码起始地址并不是上述的 0x804 8000 (IA32) 或 0x40 0000 (x86-64)，而是在地址 0 附近，这主要是因为「地址空间随机化技术」（ASLR），此技术在 Ch04 中有介绍。</p>
<h4 id="linux_1">Linux 虚拟地址空间中的区域</h4>
<p>Linux 将进程对应的虚拟空间组织成若干「区域」（area）的集合，这些区域是指虚拟地址空间中已分配的连续区块，如图 7.2 中的只读代码段、可读写数据段、运行时堆、用户栈、共享库等区域。</p>
<p>Linux 内核为每个进程维护一个「进程描述符」，数据类型为 <code>task_struct</code> 结构。</p>
<p><code>task_struct</code> 中记录了内核运行该进程所需要的所有信息，例如进程的 PID（process ID, process identity）、只想用户栈的指针、可执行目标文件的文件名等。<code>task_struct</code> 结构可对进程虚拟地址空间中的区域进行描述。</p>
<p>【这里有一张图，图 7.3】</p>
<p>如上图所示，<code>task_struct</code> 结构中的指针指向一个 <code>mm_struct</code> 结构，后者描述了对应进程虚拟存储空间的当前状态，其中，字段 <code>mmap</code> 指向一个由 <code>vm_area_struct</code> 结构构成的链表表头。</p>
<p>每个 <code>vm_area_struct</code> 结构描述了对应进程虚拟地址空间中的一个区域，可通过系统调用函数 <code>mmap()</code> 添加一个区域，<code>vm_area_struct</code> 中的部分字段如下：</p>
<ul>
<li><code>vm_start</code>：指向区域的开始处。</li>
<li><code>vm_end</code>：指向区域的结束处。</li>
<li><code>vm_prot</code>：描述区域的访问权限。</li>
<li><code>vm_flags</code>：描述区域的属性，如是否与其他进程共享等。</li>
<li><code>vm_next</code>：指向链表下一个 <code>vm_area_struct</code>.</li>
</ul>
<h3 id="_4">虚拟存储器的基本类型</h3>
<p>在 cache - 主存层次中 cache 是主存的缓存，类似地，在虚拟存储器机制中，可将主存看成是外存的缓存。</p>
<p>因此实现虚拟存储器机制与实现 cache 一样，也必须考虑交换块大小、映射、替换和写策略问题。</p>
<p>根据方案的不同，虚拟存储器分成三种不同的类型：「段式虚拟存储器」、「页式虚拟存储器」、「段页式虚拟存储器」。</p>
<h4 id="_5">段式虚拟存储器</h4>
<p>根据程序的模块化特性，可按程序的逻辑结构将其划分成多个相对独立的部分，这些相对独立的部分称为「段」（segment）。</p>
<p>分段方式下，将主存空间按实际程序中的段来划分，并通过「段表」中的「段表项」记录每个段在主存中的基址、段长、访问权限、使用和装入情况等。</p>
<p>每个进程有一个段表，指令给出的虚拟地址即为段内偏移，其加上对应段的基址得到实际访问的主存物理地址。</p>
<p>段式虚拟存储器实现机制较简单，硬件实现成本低，适合简单的嵌入式系统和实时系统。由于段的粒度较大，不易管理，且易产生主存碎片，因此现代操作系统通常不使用段式虚拟存储管理方式。</p>
<h4 id="_6">页式虚拟存储器</h4>
<p>现代操作系统主要采用页式虚拟存储管理方式。在「页式虚拟存储系统」中，虚拟地址空间被划分为大小相等的「页」（page），外存和主存之间以页为单位交换信息。</p>
<p>虚拟地址空间中的页称为「虚拟页」、「逻辑页」、「虚页」，简称 VP (virtual page)；主存空间也被划分为同样大小的「页框」（「页帧」），也称为「物理页」或「实页」，简称 PF (page frame) 或 PP (physical page).</p>
<p>虚拟存储管理采用「请求分页」思想，仅将当前程序需要的页从外存调入主存，而其他不活跃的页保留在外村。当访问信息所在页不在主存中时，CPU 抛出「缺页异常」，此时操作系统从外存将缺失页装入主存。</p>
<p>虚拟地址空间中有一些没有内容的「空洞」，如图 7.2 所示：</p>
<ul>
<li>没有和任何内容有关联的页（例如共享库应摄取和堆或栈之间的部分）称为「未分配页」。</li>
<li>对于代码和数据等有内容区域所关联页称为「已分配页」。</li>
</ul>
<p>已分配页又分为两类：</p>
<ul>
<li>已被缓存在主存中的页称为「缓存页」。</li>
<li>未调入主存而存储在外存中的页称为「未缓存页」。</li>
</ul>
<p>故而所有页必然属于且仅属于未分配页、缓存页、未缓存页三者其一。</p>
<p>在主存和 cache 之间的交换单位为主存块，而在主存和外存之间的交换单位为页，通常页比主存块大得多，只因为降低主存和外存之间交换数据的频率。典型的页大小包括 4KB、8KB、1MB. 页大小近年有增大趋势，且由于外存访问速度低，在写策略时通常采用回写而非通写方式。</p>
<p>降低主存和外存之间交换数据频率的另一个方法是提高命中率，因此在主存页框和虚拟页之间采用全相联映射方式。因此与 cache 一样，必须要有一种方法来维护各虚拟页与所存放的主存页框或外存位置的映射关系，通常使用「页表」（page table）这种数据结构来维护这种映射关系。</p>
<h4 id="_7">段页式虚拟存储器</h4>
<p>顾名思义，结合段式虚拟存储器和页式虚拟存储器的特点，将程序按模块分段，段内再分页，用段表和页表（每段一个页表）进行两级定位管理。</p>
<p>段页式虚拟存储器实现机制复杂，地址转换需查段表和页表，时空开销都较大，现代操作系统通常很少使用这种管理方式。</p>
<h2 id="_8">页式虚拟存储器的实现</h2>
<h3 id="_9">页表和页表项的结构</h3>
<p>【这里有一张图，图 7.4】</p>
<p>在采用页式虚拟存储器的系统中，每页进程有一个页表，进程中每个虚拟页在页表中都有一个对应的表项，称为「页表项」。</p>
<p>页表项内容包括「该虚拟页的存放位置」、「装入位」（valid）、「修改位」（dirty）、「使用位」、「访问权限位」、「禁止缓存位」等。</p>
<ul>
<li>页表项中的「存放位置」字段用来建立虚拟页和物理页框之间的映射，用于进行虚拟地址到物理地址的转换。</li>
<li>「装入位」也称「有效位」或「存在位」，用于表示对应页是否在主存中：若为 1，则该虚拟页已从外存调入主存，是缓存页；若为 0，则该虚拟页未调入主存：若同时存放位置为 null 则为未分配页，否则为未缓存页。</li>
<li>「修改位」即「脏位」，用于说明页面是否被修改过，这是因为虚存机制中采用回写策略。</li>
<li>「使用位」用来说明页面的使用情况，通常由页面替换算法读取，因此也称「替换控制位」。例如是否最先调入（FIFO 位）、是否最近最少用（LRU 位）等。</li>
<li>「访问权限位」用来说明页面的访问权限，通常包括读、写、执（执行），用于存储保护。</li>
<li>「禁止缓存位」用来说明页面是否可以装入 cache，通常与存储器映射 I/O 编制方式配合使用，参照 Ch09.4.4.</li>
</ul>
<p>页表属于「进程控制信息」，位于虚拟地址空间中的内核空间，页表在主存中的首地址记录在 CPU 的「页表基址寄存器」中，供 MMU 在进行地址转换时使用。</p>
<p>例如图 7.3 中的 <code>pgd</code> 字段就记录了对应进程的页表在主存中的首地址。</p>
<p>页表的项数由虚拟地址空间大小决定：<strong>2 的虚拟地址位数次方除以页大小就得到页数，页数即页表项数，页表项数成页表项大小为页表大小。</strong></p>
<p>解决页表过大的方法有很多，可以采用限制大小的一级页表或二级、多级页表方式，也可采用哈希方式的倒置页表等方案。具体实现方案需要协同考虑指令系统和操作系统，读者可查阅指令集手册或操作系统相关书籍。</p>
<h3 id="_10">页式存储管理总体结构</h3>
<p>【这里有一张图，图 7.5】</p>
<p>在分页方式下，每个区域长度应为页大小的整数倍，不足部分补 0.</p>
<h3 id="_11">页式虚拟存储地址转换</h3>
<p>显然对于采用虚存机制的系统，CPU 需要将虚拟地址转换为主存物理地址，才能取指令和数据。这个工作称为「地址转换」（address translation），由 CPU 中的「存储器管理单元」（MMU）完成。</p>
<p>由于页大小是 2 的幂次，所以虚拟地址可分为以下两个字段：高位字段的「虚拟页号」（「虚页号」、「逻辑页号」）和低位字段的「页内偏移地址」（简称为「页内地址」）；主存地址亦分为高位字段的「物理页号」和地位字段的「页内偏移地址」。因虚拟页和物理页大小一样，故两者的页内偏移地址总是相等。</p>
<p>页式虚拟存储管理方式下的地址转换过程如下：</p>
<ol>
<li>MMU 根据页表基址寄存器的内容，找到主存中对应的「页表起始位置」（即「页表基地址」）</li>
<li>将虚拟地址高位字段的虚拟页号作为页表的索引，找到对应的页表项。</li>
<li>若装入位为 1，则取出物理页号（即页框号）</li>
<li>将物理页号和虚拟地址的页内地址拼接，得到用于访问主存的物理地址。</li>
</ol>
<p>若 3. 中装入位为 0，则 MMU 抛出缺页异常，并交由操作系统处理。</p>
<p>若访问权限位指出页为只读页但要写入，则访问越权，抛出页故障异常。</p>
<h3 id="_12">快表</h3>
<p>为减少访存次数，MMU 通常利用程序访问的局部性，将页表中最活跃的几个页表项装入一个特殊的高速缓存中，这些高速缓存中的页表项组成了一个页表，称为「转换旁查缓冲器」（TLB, translation lookaside buffer）或「快表」，相应地称主存中的页表为「慢表」。</p>
<p>于是地址转换过程中加入一步：首先查快表，命中则继续；缺失则查慢表，查慢表称作「页表遍历」（page table walk, page walk）。</p>
<h4 id="tlb">TLB 基本组织结构</h4>
<p>TLB 通常由 SRAM 或触发器实现，容量比慢表小得多。为提高命中率，通常具有较高关联度，采用全相联或组相联方式。</p>
<p>每个表象的内容由页表项内容加上 TLB 标记字段组成，「TLB 标记」字段用于表示该表项对应哪个虚拟页。全相联 TLB 的标记是页表项对应的虚页号，组相联 TLB 的标记是页表项对应虚页号的高位部分，低位部分为「TLB 组索引」。</p>
<p>查找 TLB 时，先通过虚页号的 TLB 组索引字段选出 TLB 组，然后将虚页号的标记字段与各标记字段同时进行比较。若其中一行标记相等且有效位为 1，则「TLB 命中」，此时可直接取出页表项进行地址转换；否则「TLB 缺失」，进而查询慢表。</p>
<p>与 cache 不同，存数指令不会将数据写入 TLB，故 TLB 的设计无须考虑写策略。</p>
<p>目前 TLB 的一些典型指标如下：TLB 大小为 16-512 项，命中时间为 0.5-1 个时钟周期，缺失损失为 10-100 个时钟周期，命中率为 99%-99.99%。 </p>
<h4 id="tlb_1">TLB 的缺失处理</h4>
<p>TLB 缺失时，根据指令集体系结构设计，通常有以下两种处理方式：</p>
<ul>
<li>「硬件处理方式」：首先由 MMU 在 TLB 中寻找一个空闲 TLB 表项，若已满则根据替换算法进行 TLB 替换。然后由 MMU 中的「页表遍历器」（PTW, page table walker）模块自动进行页表遍历。</li>
<li>「软件处理方式」：MMU 抛出 TLB 缺失异常，然后由操作系统的「TLB 缺失异常处理程序」进行 TLB 替换、页表遍历、页表项装入等一系列操作。</li>
</ul>
<p>采用硬件处理方式时，TLB 的内部结构和确实处理过程对软件透明，对软件的兼容性更好，但由于需要进行 TLB 替换，因此不宜使用复杂的替换算法，通常采用随即替换策略。</p>
<p>采用软件处理方式时，为了让操作系统管理 TLB，指令集体系结构需要提供若干特殊寄存器和 TLB 管理指令，前者用于存放造成 TLB 缺失的虚拟地址、待装入 TLB 的表项结构等，后者用于让软件对 TLB 进行装入、清除、查找等操作。</p>
<p>软件必须了解 TLB 的内部结构，才能按照正确的格式将页表项装入 TLB，这种方式下，TLB  表项的替换由软件决定，因此可采用较为复杂的算法来提升 TLB 的命中率。</p>
<p>此外，由于异常处理会打断处理器流水线，因此软件处理方式的缺失损失比硬件处理方式大，而对于乱序超标量处理器，前者对 IPC 带来的损失更大。</p>
<p>使用硬件处理方式的典型指令集体系结构是 IA32，使用软件处理方式的典型指令集体系结构是 MIPS. RISC-V 页采用硬件处理方式。</p>
<h4 id="tlb-tlb">联合/分离 TLB 和多级 TLB</h4>
<p>与 cache 设计类似，TLB 的设计也可以考虑指令和数据 TLB 分离以及多级 TLB 等方案。</p>
<p>现代处理器通常包含 L1 和 L2 TLB，且 L1 TLB 采用「分离 TLB」， 即数据 TLB 和指令 TLB 独立工作，L2 TLB 采用「联合 TLB」。</p>
<p>与 cache 不同，存数指令不会将数据写入 TLB，因此不会产生数据 TLB 和指令 TLB 之间的一致性问题。</p>
<h4 id="tlb_2">TLB 和慢表之间的一致性问题</h4>
<p>当操作系统更新慢表中的页表项时，会带来 TLB 和慢表之间的一致性问题。</p>
<p>为解决上述问题，需要通过额外的同步机制来保证地址翻译过程使用的是最新的页表项。</p>
<p>一种简单的实现方式是冲刷系统中所有 TLB 使后续 TLB 访问一定发生确实，但对性能影响太大，可用更复杂的控制逻辑来实现仅冲刷指定部分。</p>
<p>特别地，对于流水线处理器，因为指令分多个阶段并行，还需冲刷流水线，避免取指、取数错误。</p>
<h4 id="tlb_3">TLB 和地址空间切换</h4>
<p>由于每个进程的虚拟地址空间一致，相同的虚拟地址在不同进程中将映射到不同的物理地址，因此切换到新进程时，可能访问错误的物理页。</p>
<ul>
<li>一种解决办法是进程进行上下文切换时直接冲刷 TLB。</li>
<li>另一种解决办法是为页表基址寄存器和 TLB 中的每个页表项添加「地址空间标识」（ASID, address space identifier）字段，前者用于标识当前运行的是哪个进程，后者用于标识该页表项属于哪个进程。比较 TLB 标记的同时，额外比较页表基址寄存器和页表项的 ASID.</li>
</ul>
<h2 id="tlb-cache">具有 TLB 和 cache 的存储系统</h2>
<h3 id="_13">层次化存储系统结构</h3>
<p>【这里有一张图，图 7.7】</p>
<p>这张图很详细。</p>
<h3 id="cpu">CPU 访存过程</h3>
<p>【这里有一张图，图 7.8】</p>
<p>【这里有一张表，表 7.1】</p>
<p>表 7.1 列出了关于 TLB、页、cache 命中/缺失的八种情况，其中三种情况不可能发生，可能的五种情况如下。</p>
<table>
<thead>
<tr>
<th>序号</th>
<th>TLB</th>
<th>page</th>
<th>cache</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>hit</td>
<td>hit</td>
<td>hit</td>
</tr>
<tr>
<td>2</td>
<td>hit</td>
<td>hit</td>
<td>miss</td>
</tr>
<tr>
<td>3</td>
<td>miss</td>
<td>hit</td>
<td>hit</td>
</tr>
<tr>
<td>4</td>
<td>miss</td>
<td>hit</td>
<td>miss</td>
</tr>
<tr>
<td>5</td>
<td>miss</td>
<td>miss</td>
<td>miss</td>
</tr>
</tbody>
</table>
<p>第一种情况最好，无需访问主存；第二、三种情况需要访问一次主存；第四种情况需要访问两次主存；第五种情况抛出缺页异常，需访问外存且至少访问主存两次。</p>
<p>cache 缺失由硬件处理，缺页由软件处理（操作系统通过缺页异常处理程序实现），TLB 缺失则根据指令集体系结构设计而定。</p>
<h3 id="cache">cache 的四种查找方式</h3>
<p>在虚拟存储系统中，可选择用物理地址或虚拟地址查找 cache 行，根据标记字段和索引字段使用的不同，共分为四种：</p>
<ul>
<li>「实索引实标记」（PIPT; physically indexed, physically tagged）。优点是容易实现，缺点是每次访问签都需要先由 MMU 进行地址转换，还需等待页表项装入 TLB，通常 L2, L3 cache 采用 PIPT 方式。</li>
<li>「虚索引虚标记」（VIVT; virtually indexed, virtually tagged）。优点是查找速度快，无须经 MMU 进行地址转换即可访问，缺点是存在三个重要问题。</li>
<li>「虚索引实标记」（VIPT; virtually indexed, physically tagged）。VIPT 可在进行地址转换的同时用地址索引查找 cache 行或组，但仍需等待地址转换的出物理地址后才能比较标记。实际使用中还会让索引字段完全落在页内地址字段中，使索引字段在地址转换前后结果一致。VIPT 可以避免 VIVT 的三个重大问题，但也限制了 cache 大小。故而通常 L1 cache 采用 VIPT 方式。</li>
<li>「实索引虚标记」（PIVT; physically indexed, virtually tagged）。无明显优点，但集合了 PIPT 和 VIVT 的缺点，几乎不用。</li>
</ul>
<p>VIVT 的三个重大问题是：</p>
<ul>
<li>「别名（alias）问题」：两个不同的虚拟地址可能映射到同一物理地址，此时需维护两个 cache 行之间的数据一致性。为了判断别名关系通常需要在 cache 中添加额外的逻辑。</li>
<li>「同名（homonyms）问题」：与「TLB 和地址空间切换问题」类似。VIVT 仅靠虚拟地址无法确定 cache 行属于哪个进程。解决办法是在进程上下文切换时冲刷 cache 或为每个 cache 行添加 ASID，并添加额外比较逻辑。</li>
<li>「页表项更新问题」：与「TLB 与慢表一致性问题」类似，在页表项的映射关系更新时，还需额外写回相应的 cache 行。</li>
</ul>
<h2 id="_14">存储保护机制</h2>
<p>为避免主存中多个程序相互干扰，防止因某个进程出错而破坏其他进程，或某个进程非法访问其他进程的代码或数据区，应对每个进程进行存储保护。</p>
<p>为支持操作系统实现存储保护，硬件必须有以下三个基本功能：</p>
<ol>
<li>
<p>使部分 CPU 状态只能由操作系统内核程序访问，而用户进程只能读不能写，或干脆禁止访问。</p>
</li>
<li>
<p>至少支持两种特权模式。操作系统内核程序需要具有比用户程序更多的特权。</p>
</li>
<li>
<p>提供在不同特权模式之间相互切换的机制。</p>
</li>
</ol>
<p>对于 1. 只有操作系统内核程序才能通过「特权指令」（或称「管态指令」）访问页表基址寄存器、TLB 内容等。用户进程执行时，CPU 将抛出非法指令异常或保护错异常。</p>
<p>对于 2. 内核程序和用户程序运行在不同的「特权级别」或「特权模式」。运行内核程序时处理器所处的模式称为「监管模式」（supervisor mode）、「内核模式」（kernel mode）、「超级用户模式」或「管理程序状态」，简称为「管态」、「管理态」、「内核态」或「核心态」；运行用户程序时处理器锁出的模式称为「用户模式」（user mode）、「用户状态」或「目标程序状态」，简称为「目态」或「用户态」。</p>
<p>x86 架构支持四个特权级，但操作系统通常只使用 0 级（内核模式）和 3 级（用户模式）；RISC-V 架构支持三种特权模式：U 模式（用户模式）、S 模式（监管模式）、M 模式（机器模式）。</p>
<p>对于 3. 用户模式下可以通过「系统调用执行陷阱/自陷指令」转入更高特权模式执行。异常/中断的相应过程也可切换不同特权模式。</p>
<p>硬件通过提供相应的「控制状态寄存器」、专门的「自陷指令」和各种「特权指令」和操作系统协同实现以上三个基本功能。</p>
<p>存储保护包括两种情况：访问权限保护和存储区域保护。</p>
<h4 id="_15">访问权限保护</h4>
<p>「访问权限保护」检测是否发生「访问越权」。</p>
<p>通常，各程序对本程序所在的存储区可读可写，对共享区或已获授权区可读不可写，对未或授权信息不可访问。</p>
<p>可读写数据段为可读可写，只读代码段只读或只执。</p>
<h4 id="_16">存储区域保护</h4>
<p>「存储区域保护」检测是否发生「地址越界」或「访问越级」，通常有以下几种常用的方式：</p>
<ul>
<li>「加界重定位」：有些系统用专门的一对上界寄存器和下界寄存器，检测物理地址是否超出上下界范围。</li>
<li>「键保护」：操作系统为主存的每一个页框分配一个存储键，为每个用户进程设置一个程序键，访问时进行比较。特别地，万能匹配键设置为 0.</li>
<li>「环保护」：x86 采用该方案，操作系统内核在 0 环（内核态），操作系统其他部分在 1 环，用户进程工作在 3 环（用户态）。</li>
</ul>
<h2 id="ia-32-linux">IA-32 + Linux 中的地址转换*</h2>
<p>x86 系统启动后总是先进入实地址模式，对系统进行初始化后转入保护模式。</p>
<p>IA32 采用段页式虚拟存储器，地址转换过程涉及「逻辑地址」、「线性地址」和「物理地址」。「逻辑地址」即「虚拟地址」。</p>
<p>IA32 中的逻辑地址由 48 位组成，包括 16 位的「段选择符」和 32 位的「段内偏移量」（即「有效地址」）。</p>
<p>为方便多用户、多任务下的存储管理，IA32 采用在分段基础上的分页机制。分段过程将逻辑地址转换为线性地址，分页过程将线性地址转换为物理地址。 </p>
<h3 id="_17">逻辑地址到线性地址的转换</h3>
<h4 id="_18">段描述符</h4>
<p>【这里有一张图，图 7.9】</p>
<p>具体看书。</p>
<h4 id="_19">段描述符表</h4>
<p>「段描述符表」即「段表」，主要有三种类型：「全局描述符表」（GDT, global descriptor）、「局部描述符表」（LDT, local descriptor）、「中断描述符表」（IDT, interrupt descriptor）。</p>
<p>具体看书。</p>
<h4 id="_20">段选择符和段寄存器</h4>
<p>【这里有一张图，图 7.10】</p>
<p>上图展示了段选择符的格式，其存放在「段寄存器」中，段寄存器供 6 个，3 个有专门的功能。</p>
<p>具体看书。</p>
<h4 id="_21">用户不可见寄存器</h4>
<p>用户进程不可直接访问的内部寄存器，包括「描述符 cache」、「任务寄存器」（TR）、「局部描述符表寄存器」（LDTR）、「全局描述符表寄存器」（GDTR）、「中断描述符表寄存器」（IDTR）。</p>
<h4 id="_22">逻辑地址向线性地址的转换</h4>
<p>【这里有一张图，图 7.12】</p>
<p>看图说话。</p>
<h3 id="_23">线性地址到物理地址的转换</h3>
<h4 id="_24">控制寄存器</h4>
<p>CRx，包括 CR0、CR2、CR3 寄存器。</p>
<p>两级页表方式中，32 位线性地址由 10 位「页目录索引」（DIR）、10 位「页表索引」（PAGE）和 12 位 「页内偏移量」（OFFSET）组成.</p>
<p>具体看书。</p>
<h4 id="_25">线性地址向物理地址转换</h4>
<h2 id="intel-core-i7-linux">实例：Intel Core i7 + Linux 存储系统*</h2>
<h2 id="_26">堆区动态分配*</h2>
<h2 id="_27">章节小结</h2>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../../../../..", "features": [], "search": "../../../../../assets/javascripts/workers/search.7a47a382.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../../../../assets/javascripts/bundle.e71a0d61.min.js"></script>
      
        <script src="../../../../../javascripts/mathjax.js"></script>
      
        <script src="https://unpkg.com/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>